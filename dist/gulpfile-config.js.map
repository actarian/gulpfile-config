{"version":3,"file":"dist/gulpfile-config.js","sources":["../src/logger.js","../src/tfs.js","../src/compile.js","../src/bundle.js","../src/config.js","../src/gulpfile-config.js"],"sourcesContent":["const gray = require('ansi-gray');\nconst supportsColor = require('color-support');\nconst Console = require('console').Console;\nconst parseNodeVersion = require('parse-node-version');\nconst timestamp = require('time-stamp');\n\nconst nodeVersion = parseNodeVersion(process.version);\n\nconst colorDetectionOptions = {\n\t// If on Windows, ignore the isTTY check\n\t// This is due to AppVeyor (and thus probably common Windows platforms?) failing the check\n\t// TODO: If this is too broad, we can reduce it to an APPVEYOR env check\n\tignoreTTY: (process.platform === 'win32'),\n};\n\n// Needed to add this because node 10 decided to start coloring log output randomly\nlet console;\nif (nodeVersion.major >= 10) {\n\t// Node 10 also changed the way this is constructed\n\tconsole = new Console({\n\t\tstdout: process.stdout,\n\t\tstderr: process.stderr,\n\t\tcolorMode: false,\n\t});\n} else {\n\tconsole = new Console(process.stdout, process.stderr);\n}\n\nconst palette = {\n\tReset: '\\x1b[0m',\n\tBright: '\\x1b[1m',\n\tDim: '\\x1b[2m',\n\tUnderscore: '\\x1b[4m',\n\tBlink: '\\x1b[5m',\n\tReverse: '\\x1b[7m',\n\tHidden: '\\x1b[8m',\n\t//\n\tFgBlack: '\\x1b[30m',\n\tFgRed: '\\x1b[31m',\n\tFgGreen: '\\x1b[32m',\n\tFgYellow: '\\x1b[33m',\n\tFgBlue: '\\x1b[34m',\n\tFgMagenta: '\\x1b[35m',\n\tFgCyan: '\\x1b[36m',\n\tFgWhite: '\\x1b[37m',\n\t//\n\tBgBlack: '\\x1b[40m',\n\tBgRed: '\\x1b[41m',\n\tBgGreen: '\\x1b[42m',\n\tBgYellow: '\\x1b[43m',\n\tBgBlue: '\\x1b[44m',\n\tBgMagenta: '\\x1b[45m',\n\tBgCyan: '\\x1b[46m',\n\tBgWhite: '\\x1b[47m',\n};\n\nconst colors = [palette.FgWhite, palette.FgCyan, palette.FgGreen, palette.FgYellow, palette.FgMagenta, palette.FgBlue];\n\nfunction hasFlag(flag) {\n\treturn (process.argv.indexOf('--' + flag) !== -1);\n}\n\nfunction addColor(str) {\n\tif (hasFlag('no-color')) {\n\t\treturn str;\n\t}\n\n\tif (hasFlag('color')) {\n\t\treturn gray(str);\n\t}\n\n\tif (supportsColor(colorDetectionOptions)) {\n\t\treturn gray(str);\n\t}\n\n\treturn str;\n}\n\nfunction getTimestamp() {\n\treturn '[' + addColor(timestamp('HH:mm:ss')) + ']';\n}\n\nfunction getLogMessage(items) {\n\tlet a = Array.from(items);\n\ta = [].concat.apply([], (a.map((x, i) => [colors[i % colors.length], x])));\n\ta.push(palette.Reset);\n\treturn a;\n}\n\nfunction getErrorMessage(items) {\n\tlet a = Array.from(items);\n\ta = [].concat.apply([], (a.map((x, i) => [palette.FgRed, x])));\n\ta.push(palette.Reset);\n\treturn a;\n}\n\nfunction log() {\n\tconst time = getTimestamp();\n\tprocess.stdout.write(time + ' ');\n\tconsole.log.apply(console, getLogMessage(arguments));\n\treturn this;\n}\n\nfunction info() {\n\tconst time = getTimestamp();\n\tprocess.stdout.write(time + ' ');\n\tconsole.info.apply(console, getLogMessage(arguments));\n\treturn this;\n}\n\nfunction dir() {\n\tconst time = getTimestamp();\n\tprocess.stdout.write(time + ' ');\n\tconsole.dir.apply(console, getLogMessage(arguments));\n\treturn this;\n}\n\nfunction warn() {\n\tconst time = getTimestamp();\n\tprocess.stderr.write(time + ' ');\n\tconsole.warn.apply(console, getLogMessage(arguments));\n\treturn this;\n}\n\nfunction error() {\n\tconst time = getTimestamp();\n\tprocess.stderr.write(time + ' ');\n\tconsole.error.apply(console, getErrorMessage(arguments));\n\treturn this;\n}\n\nmodule.exports = log;\nmodule.exports.info = info;\nmodule.exports.dir = dir;\nmodule.exports.warn = warn;\nmodule.exports.error = error;\n","const fs = require('fs'),\n\tgulpif = require('gulp-if'),\n\ttfs = require('tfs'),\n\tthrough2 = require('through2');\n\nconst log = require('./logger');\n\nfunction tfsCheckout(config, skip) {\n\treturn gulpif(!skip && config.tfs,\n\t\tthrough2.obj((file, enc, callback) => {\n\t\t\t// console.log('TfsCheckout', file.path);\n\t\t\tif (fs.existsSync(file.path)) {\n\t\t\t\tconst paths = [file.path];\n\t\t\t\tif (fs.existsSync(file.path + '.map')) {\n\t\t\t\t\tpaths.push(file.path + '.map');\n\t\t\t\t}\n\t\t\t\ttfs('checkout', paths, null, (responseError, response) => {\n\t\t\t\t\tcallback(null, file);\n\t\t\t\t\tif (responseError) {\n\t\t\t\t\t\tconsole.error(responseError.error);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tlog('Checkout', file.path, response.message);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tcallback(null, file);\n\t\t\t}\n\t\t})\n\t);\n}\n\nmodule.exports = tfsCheckout;\n","const autoprefixer = require('gulp-autoprefixer'),\n\tbabelPresetEnv = require('@babel/preset-env'),\n\tbrowserify = require('browserify'),\n\tconnect = require('gulp-connect'),\n\tcssnano = require('cssnano'),\n\tfilter = require('gulp-filter'),\n\tgulpif = require('gulp-if'),\n\tpath = require('path'),\n\tplumber = require('gulp-plumber'),\n\tpostcss = require('gulp-postcss'),\n\trename = require('gulp-rename'),\n\trollup = require('gulp-better-rollup'),\n\tscss = require('gulp-sass'),\n\tterser = require('gulp-terser'),\n\tthrough2 = require('through2'),\n\trollupPluginBabel = require('rollup-plugin-babel'),\n\trollupPluginCommonJs = require('@rollup/plugin-commonjs'),\n\trollupPluginLicense = require('rollup-plugin-license'),\n\trollupPluginNodeResolve = require('@rollup/plugin-node-resolve'),\n\ttsify = require('tsify');\n\nconst { dest, parallel, src, watch } = require('gulp');\n\nconst log = require('./logger');\nconst tfsCheckout = require('./tfs');\n\n// COMPILERS\nfunction compileScss_(config, done) {\n\tconst items = compiles_(config, '.scss');\n\tconst tasks = items.map(item => function itemTask() {\n\t\tconst plugins = [\n\t\t\t// autoprefixer({browsers: ['last 1 version']}),\n\t\t\tcssnano()\n\t\t];\n\t\treturn src(item.input, { base: '.', allowEmpty: true, sourcemaps: true })\n\t\t\t.pipe(plumber())\n\t\t\t.pipe(scss({\n\t\t\t\tincludePaths: ['./node_modules/', __dirname + '/node_modules', 'node_modules'],\n\t\t\t}).on('compile:scss.error', (error) => {\n\t\t\t\tlog.error('compile:scss', error);\n\t\t\t}))\n\t\t\t.pipe(autoprefixer())\n\t\t\t.pipe(rename(item.output))\n\t\t\t.pipe(tfsCheckout(config))\n\t\t\t.pipe(dest('.', item.minify ? null : { sourcemaps: '.' }))\n\t\t\t.pipe(filter('**/*.css'))\n\t\t\t.on('end', () => log('Compile', item.output))\n\t\t\t.pipe(gulpif(item.minify, postcss(plugins)))\n\t\t\t.pipe(gulpif(item.minify, rename({ extname: '.min.css' })))\n\t\t\t.pipe(tfsCheckout(config, !item.minify))\n\t\t\t.pipe(gulpif(item.minify, dest('.', { sourcemaps: '.' })))\n\t\t\t.pipe(filter('**/*.css'))\n\t\t\t.pipe(connect.reload());\n\t});\n\treturn tasks.length ? parallel(...tasks)(done) : done();\n}\n\nfunction compileJs_(config, done) {\n\tconst items = compiles_(config, '.js');\n\tconst tasks = [];\n\titems.forEach(item => {\n\t\ttasks.push(function itemTask(done) {\n\t\t\treturn compileRollupJs_(config, item);\n\t\t});\n\t});\n\treturn tasks.length ? parallel(...tasks)(done) : done();\n}\n\nfunction compileRollupJs_(config, item) {\n\tconst rollupInput = {\n\t\tplugins: [\n\t\t\trollupPluginCommonJs(),\n\t\t\trollupPluginBabel({\n\t\t\t\tpresets: [\n\t\t\t\t\t[babelPresetEnv, { modules: false, loose: true }]\n\t\t\t\t],\n\t\t\t\texclude: 'node_modules/**' // only transpile our source code\n\t\t\t\t// babelrc: false,\n\t\t\t}),\n\t\t\trollupPluginLicense({\n\t\t\t\tbanner: `@license <%= pkg.name %> v<%= pkg.version %>\n\t\t\t\t(c) <%= moment().format('YYYY') %> <%= pkg.author %>\n\t\t\t\tLicense: <%= pkg.license %>`,\n\t\t\t}),\n\t\t]\n\t};\n\tconst rollupOutput = Object.assign({\n\t\t\tfile: item.output,\n\t\t\tname: path.basename(item.output, '.js'),\n\t\t\tformat: 'umd',\n\t\t\tglobals: {},\n\t\t\texternal: []\n\t\t},\n\t\t(item.rollup ? (item.rollup.output || {}) : {})\n\t);\n\t// console.log(rollupOutput);\n\treturn src(item.input, { base: '.', allowEmpty: true, sourcemaps: true })\n\t\t.pipe(plumber())\n\t\t.pipe(rollup(rollupInput, rollupOutput))\n\t\t.pipe(rename(item.output))\n\t\t.pipe(tfsCheckout(config))\n\t\t.pipe(dest('.', item.minify ? null : { sourcemaps: '.' }))\n\t\t.pipe(filter('**/*.js'))\n\t\t.on('end', () => log('Compile', item.output))\n\t\t.pipe(gulpif(item.minify, terser()))\n\t\t.pipe(gulpif(item.minify, rename({ extname: '.min.js' })))\n\t\t.pipe(tfsCheckout(config, !item.minify))\n\t\t.pipe(gulpif(item.minify, dest('.', { sourcemaps: '.' })))\n\t\t.pipe(filter('**/*.js'))\n\t\t.pipe(connect.reload());\n}\n\nfunction compileTs_(config, done) {\n\tlet options = {\n\t\tglobal: true,\n\t\tplugins: ['@babel/plugin-transform-flow-strip-types'],\n\t\tpresets: [\n\t\t\t['@babel/preset-env', {\n\t\t\t\ttargets: {\n\t\t\t\t\tchrome: '58',\n\t\t\t\t\t// ie: '11'\n\t\t\t\t},\n\t\t\t\tloose: true,\n\t\t\t}],\n\t\t],\n\t\textensions: ['.ts']\n\t};\n\tconst items = compiles_(config, '.ts');\n\tconst tasks = items.map(item => function itemTask(done) {\n\t\tlog(item.input);\n\t\treturn src(item.input, { base: '.', allowEmpty: true, sourcemaps: true })\n\t\t\t.pipe(plumber())\n\t\t\t.pipe(through2.obj((file, enc, next) => {\n\t\t\t\tbrowserify(file.path)\n\t\t\t\t\t.plugin(tsify)\n\t\t\t\t\t.transform('babelify', options)\n\t\t\t\t\t.bundle((error, response) => {\n\t\t\t\t\t\tif (error) {\n\t\t\t\t\t\t\tlog.error('compile:ts', error);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfile.contents = response;\n\t\t\t\t\t\t\tnext(null, file);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.on('error', (error) => {\n\t\t\t\t\t\tlog.error('compile:ts', error.toString());\n\t\t\t\t\t});\n\t\t\t}, (done) => {\n\t\t\t\tdone();\n\t\t\t}))\n\t\t\t.pipe(rename(item.output))\n\t\t\t.pipe(tfsCheckout(config))\n\t\t\t.pipe(dest('.', item.minify ? null : { sourcemaps: '.' }))\n\t\t\t.pipe(filter('**/*.js'))\n\t\t\t.on('end', () => log('Compile', item.output))\n\t\t\t.pipe(gulpif(item.minify, terser()))\n\t\t\t.pipe(gulpif(item.minify, rename({ extname: '.min.js' })))\n\t\t\t.pipe(tfsCheckout(config, !item.minify))\n\t\t\t.pipe(gulpif(item.minify, dest('.', { sourcemaps: '.' })))\n\t\t\t.pipe(filter('**/*.js'))\n\t\t\t.pipe(connect.reload());\n\t});\n\treturn tasks.length ? parallel(...tasks)(done) : done();\n}\n\nfunction compilesGlobs_(config, ext) {\n\treturn compiles_(config, ext).map(x => {\n\t\treturn x.input.replace(/\\/[^\\/]*$/, '/**/*' + ext);\n\t});\n}\n\nfunction compiles_(config, ext) {\n\tif (config) {\n\t\treturn config.target.compile.filter((item) => {\n\t\t\treturn new RegExp(`${ext}$`).test(item.input);\n\t\t});\n\t} else {\n\t\treturn [];\n\t}\n}\n\nfunction compileWatcher_(config) {\n\tconst scss = watch(compilesGlobs_(config, '.scss'), function compileScss(done) {\n\t\tcompileScss_(config, done);\n\t}).on('change', logWatch);\n\tconst js = watch(compilesGlobs_(config, '.js'), function compileJs(done) {\n\t\tcompileJs_(config, done);\n\t}).on('change', logWatch);\n\tconst ts = watch(compilesGlobs_(config, '.ts'), function compileTs(done) {\n\t\tcompileTs_(config, done);\n\t}).on('change', logWatch);\n\treturn [scss, js, ts];\n}\n\nfunction logWatch(path, stats) {\n\tlog('Changed', path);\n}\n\nmodule.exports = {\n\tcompileScss_,\n\tcompileJs_,\n\tcompileRollupJs_,\n\tcompileTs_,\n\tcompilesGlobs_,\n\tcompileWatcher_\n};\n","const concat = require('gulp-concat'),\n\tcssnano = require('cssnano'),\n\tfilter = require('gulp-filter'),\n\tgulpif = require('gulp-if'),\n\tplumber = require('gulp-plumber'),\n\tpostcss = require('gulp-postcss'),\n\trename = require('gulp-rename'),\n\tterser = require('gulp-terser');\n\nconst { dest, parallel, src, watch } = require('gulp');\n\nconst log = require('./logger');\nconst tfsCheckout = require('./tfs');\n\n// BUNDLE CSS\nfunction bundleCss_(config, done) {\n\tconst items = bundles_(config, '.css');\n\tconst tasks = items.map(item => function itemTask(done) {\n\t\treturn bundleCssItem_(config, item);\n\t});\n\treturn tasks.length ? parallel(...tasks)(done) : done();\n}\n\nfunction bundleCssItem_(config, item) {\n\tconst skip = item.input.length === 1 && item.input[0] === item.output;\n\tconst plugins = [\n\t\t// autoprefixer({browsers: ['last 1 version']}),\n\t\tcssnano()\n\t];\n\treturn src(item.input, { base: '.', allowEmpty: true, sourcemaps: true })\n\t\t.pipe(plumber())\n\t\t.pipe(gulpif(!skip, concat(item.output)))\n\t\t.pipe(tfsCheckout(config, skip))\n\t\t.pipe(gulpif(!skip, dest('.')))\n\t\t.on('end', () => log('Bundle', item.output))\n\t\t.pipe(gulpif(item.minify, postcss(plugins)))\n\t\t.pipe(gulpif(item.minify, rename({ extname: '.min.css' })))\n\t\t.pipe(tfsCheckout(config, !item.minify))\n\t\t.pipe(gulpif(item.minify, dest('.', { sourcemaps: '.' })))\n\t\t.pipe(filter('**/*.css'));\n}\n\n// BUNDLE JS\nfunction bundleJs_(config, done) {\n\tconst items = bundles_(config, '.js');\n\tconst tasks = items.map(item => function itemTask(done) {\n\t\treturn bundleJsItem_(config, item);\n\t});\n\treturn tasks.length ? parallel(...tasks)(done) : done();\n}\n\nfunction bundleJsItem_(config, item) {\n\tconst skip = item.input.length === 1 && item.input[0] === item.output;\n\treturn src(item.input, { base: '.', allowEmpty: true, sourcemaps: true })\n\t\t.pipe(plumber())\n\t\t.pipe(gulpif(!skip, concat(item.output)))\n\t\t.pipe(tfsCheckout(config, skip))\n\t\t.pipe(gulpif(!skip, dest('.')))\n\t\t.on('end', () => log('Bundle', item.output))\n\t\t.pipe(gulpif(item.minify, terser()))\n\t\t.pipe(gulpif(item.minify, rename({ extname: '.min.js' })))\n\t\t.pipe(tfsCheckout(config, !item.minify))\n\t\t.pipe(gulpif(item.minify, dest('.', { sourcemaps: '.' })))\n\t\t.pipe(filter('**/*.js'));\n}\n\n// BUNDLE RESOURCE\nfunction bundleResource_(config, done) {\n\tconst items = resources_(config);\n\tconst tasks = items.map(item => function itemTask(done) {\n\t\treturn bundleResourceItem_(config, item);\n\t});\n\treturn tasks.length ? parallel(...tasks)(done) : done();\n}\n\nfunction bundleResourceItem_(config, item) {\n\tconst skip = item.input.length === 1 && item.input[0] === item.output;\n\treturn src(item.input, { base: '.', allowEmpty: true, sourcemaps: false })\n\t\t.pipe(plumber())\n\t\t.pipe(rename({ dirname: item.output }))\n\t\t.pipe(gulpif(!skip, dest('.')))\n\t\t.pipe(tfsCheckout(config, skip))\n\t\t.on('end', () => log('Bundle', item.output));\n}\n\nfunction bundles_(config, ext) {\n\tif (config.target) {\n\t\treturn config.target.bundle.filter((item) => {\n\t\t\tif (ext && item.output) {\n\t\t\t\treturn new RegExp(`${ext}$`).test(item.output);\n\t\t\t} else {\n\t\t\t\treturn ext === 'resource' && !item.output;\n\t\t\t}\n\t\t});\n\t} else {\n\t\treturn [];\n\t}\n}\n\nfunction resources_(config) {\n\tif (config.target) {\n\t\treturn config.target.resource || [];\n\t} else {\n\t\treturn [];\n\t}\n}\n\nfunction bundleWatcher_(config) {\n\tconst css = bundles_(config, '.css').map((item) => {\n\t\treturn watch(item.input, function bundleCss_(done) {\n\t\t\treturn bundleCssItem_(config, item);\n\t\t}).on('change', logWatch);\n\t});\n\tconst js = bundles_(config, '.js').map((item) => {\n\t\treturn watch(item.input, function bundleJs_(done) {\n\t\t\treturn bundleJsItem_(config, item);\n\t\t}).on('change', logWatch);\n\t});\n\tconst resource = resources_(config).map((item) => {\n\t\treturn watch(item.input, function bundleResource_(done) {\n\t\t\treturn bundleResourceItem_(config, item);\n\t\t}).on('change', logWatch);\n\t});\n\treturn [css, js, resource];\n}\n\nfunction logWatch(path, stats) {\n\tlog('Changed', path);\n}\n\nmodule.exports = {\n\tbundleCss_,\n\tbundleCssItem_,\n\tbundleJs_,\n\tbundleJsItem_,\n\tbundleResource_,\n\tbundleResourceItem_,\n\tbundles_,\n\tresources_,\n\tbundleWatcher_\n};\n","const fs = require('fs'),\n\tpath = require('path'),\n\tprocess = require('process'),\n\tyargs = require('yargs');\n\nconst { watch } = require('gulp');\n\nconst log = require('./logger');\n\ntry {\n\t// Fallback for Windows backs out of node_modules folder to root of project.\n\tprocess.env.PWD = process.env.PWD || path.resolve(process.cwd(), '../../../');\n\t// Change working directory.\n\tprocess.chdir(process.env.PWD);\n} catch (err) {\n\tlog.error(`chdir: ${err}`);\n}\n\nconst path_ = './gulpfile-config.json';\nconst target = (yargs.argv || yargs().argv).target || 'browser';\n\nfunction getConfig() {\n\tconst defaultTarget = {\n\t\tcompile: [],\n\t\tbundle: []\n\t};\n\tlet config = {\n\t\ttargets: {\n\t\t\tbrowser: defaultTarget,\n\t\t\tdist: defaultTarget\n\t\t},\n\t\ttfs: false,\n\t\tserver: {\n\t\t\tsrc: './docs',\n\t\t\tpath: '/gulpfile-config/',\n\t\t\thost: 'localhost',\n\t\t\tport: 40900\n\t\t}\n\t};\n\tif (fs.existsSync(path_)) {\n\t\tconst gulpfileConfigText = fs.readFileSync(path_, 'utf8');\n\t\tconst gulpfileConfig = JSON.parse(stripBom(gulpfileConfigText));\n\t\tconfig = Object.assign(config, gulpfileConfig);\n\t} else {\n\t\tlog.warn('missing gulpfile-config.json');\n\t}\n\tconfig.target = config.targets[target] || defaultTarget;\n\treturn config;\n}\n\nfunction stripBom(text) {\n\ttext = text.toString();\n\tif (text.charCodeAt(0) === 0xFEFF) {\n\t\ttext = text.slice(1);\n\t}\n\treturn text;\n}\n\nfunction configWatcher_(callback) {\n\tconst configWatch = watch(path_, function config(done) {\n\t\tconfig = getConfig();\n\t\tif (typeof callback === 'function') {\n\t\t\treturn callback(done);\n\t\t}\n\t}).on('change', logWatch);\n\treturn [configWatch];\n}\n\nfunction logWatch(path, stats) {\n\tlog('Changed', path);\n}\n\nmodule.exports = {\n\tgetConfig: getConfig,\n\tpath: path_,\n\ttarget: target,\n\tconfigWatcher_: configWatcher_\n};\n","const connect = require('gulp-connect');\nconst { parallel, series } = require('gulp');\nconst log = require('./logger');\nconst { compileScss_, compileJs_, compileTs_, compileWatcher_ } = require('./compile');\nconst { bundleCss_, bundleJs_, bundleResource_, bundleWatcher_ } = require('./bundle');\nconst { getConfig, configWatcher_ } = require('./config');\n\nlet config = getConfig();\n\n// COMPILERS\nfunction compileScss(done) {\n\treturn compileScss_(config, done);\n}\n\nfunction compileJs(done) {\n\treturn compileJs_(config, done);\n}\n\nfunction compileTs(done) {\n\treturn compileTs_(config, done);\n}\n\nconst compileTask = parallel(compileScss, compileJs, compileTs); // compilePartials, compileSnippets\n\n// BUNDLERS\nfunction bundleCss(done) {\n\treturn bundleCss_(config, done);\n}\n\nfunction bundleJs(done) {\n\treturn bundleJs_(config, done);\n}\n\nfunction bundleResource(done) {\n\treturn bundleResource_(config, done);\n}\n\nconst bundleTask = parallel(bundleCss, bundleJs, bundleResource);\n\n// WATCH\nlet watchers = [];\n\nfunction watchTask(done) {\n\twhile (watchers.length) {\n\t\tconst w = watchers.shift();\n\t\tw.close();\n\t}\n\tconst compileWatcher = compileWatcher_(config);\n\tconst bundleWatcher = bundleWatcher_(config);\n\tconst configWatcher = configWatcher_(function(done) {\n\t\treturn series(compileTask, bundleTask, watchTask)(done);\n\t});\n\twatchers = [].concat(compileWatcher, bundleWatcher, configWatcher);\n\t// watch('./src/artisan/**/*.html', ['compile:partials']).on('change', logWatch);\n\t// watch('./src/snippets/**/*.glsl', ['compile:snippets']).on('change', logWatch);\n\tdone();\n}\n\n// SERVE\nfunction serveTask(done) {\n\tif (config.server) {\n\t\tconst options = Object.assign({\n\t\t\troot: './docs',\n\t\t\tport: 8001,\n\t\t\thost: 'localhost',\n\t\t\tname: 'Development',\n\t\t\thttps: false,\n\t\t\tpath: '/',\n\t\t\tfallback: 'index.html',\n\t\t\tlivereload: true,\n\t\t}, config.server || {});\n\t\tconnect.server(options, function() {\n\t\t\tthis.server.on('close', done);\n\t\t});\n\t} else {\n\t\tdone();\n\t}\n}\n\nfunction serveTask_local_web_server(done) {\n\tif (config.server) {\n\n\t\tconst options = Object.assign({\n\t\t\tdirectory: './docs',\n\t\t\tport: 8001,\n\t\t\thost: 'localhost',\n\t\t\tname: 'Development',\n\t\t\thttps: false,\n\t\t\tpath: '/',\n\t\t\tfallback: 'index.html',\n\t\t\tlivereload: true,\n\t\t\topen: true,\n\t\t}, config.server || {});\n\n\t\tif (options.path !== '/') {\n\t\t\toptions.rewrite = [{\n\t\t\t\tfrom: options.path + '*',\n\t\t\t\tto: options.https ? 'https' : 'http' + '://' + options.host + '/$1',\n\t\t\t}];\n\t\t}\n\n\t\tlog(options.rewrite);\n\n\t\t/*\n\t\tthis.port = 8000\n\t\tthis.hostname = '0.0.0.0'\n\t    this.maxConnections = null | 1\n\t    this.keepAliveTimeout = 5000\n\t    this.configFile = 'lws.config.js'\n\t    this.https = false\n\t    this.http2 = false\n\t    this.key = null\n\t    this.cert = null\n\t    this.pfx = null\n\t\tthis.ciphers = null\n\t    this.secureProtocol = null\n\t    this.stack = null\n\t    this.moduleDir = ['.']\n\t    this.modulePrefix = 'lws-'\n\t    this.view = null\n\t\t*/\n\t\ttry {\n\t\t\tconsole.log(lws);\n\t\t\tconst ws = lws.create(options);\n\t\t\tlog(`Server started on port ${options.port}.`);\n\t\t} catch (ex) {\n\t\t\tlog.error('Webserve could not start', ex.message);\n\t\t}\n\t} else {\n\t\tdone();\n\t}\n}\n\n// UTILS\n/*\nfunction watchAll() {\n\twatch(['***.*', '!node_modules***.*'], function watch(done) {\n\t\tdone();\n\t}).on('change', (path) => {\n\t\tlogWatch(...arguments);\n\t});\n}\n\nfunction logWatch(path, stats) {\n\tlog('Changed', path);\n}\n*/\n\nexports.compile = compileTask;\nexports.bundle = bundleTask;\nexports.watch = watchTask;\nexports.serve = serveTask;\nexports.build = series(compileTask, bundleTask);\nexports.buildAndWatch = series(compileTask, bundleTask, watchTask);\nexports.buildWatchAndServe = series(compileTask, bundleTask, watchTask, serveTask);\n"],"names":["Console","require$$0","nodeVersion","parseNodeVersion","process","version","colorDetectionOptions","ignoreTTY","platform","console","major","stdout","stderr","colorMode","palette","Reset","Bright","Dim","Underscore","Blink","Reverse","Hidden","FgBlack","FgRed","FgGreen","FgYellow","FgBlue","FgMagenta","FgCyan","FgWhite","BgBlack","BgRed","BgGreen","BgYellow","BgBlue","BgMagenta","BgCyan","BgWhite","colors","hasFlag","flag","argv","indexOf","addColor","str","gray","supportsColor","getTimestamp","timestamp","getLogMessage","items","a","Array","from","concat","apply","map","x","i","length","push","getErrorMessage","log","time","write","arguments","info","dir","warn","error","tfsCheckout","config","skip","gulpif","tfs","through2","obj","file","enc","callback","fs","existsSync","path","paths","responseError","response","message","dest","parallel","src","watch","compileScss_","done","compiles_","tasks","item","itemTask","plugins","cssnano","input","base","allowEmpty","sourcemaps","pipe","plumber","scss","includePaths","__dirname","on","autoprefixer","rename","output","minify","filter","postcss","extname","connect","reload","compileJs_","forEach","compileRollupJs_","rollupInput","rollupPluginCommonJs","rollupPluginBabel","presets","babelPresetEnv","modules","loose","exclude","rollupPluginLicense","banner","rollupOutput","Object","assign","name","basename","format","globals","external","rollup","terser","compileTs_","options","global","targets","chrome","extensions","next","browserify","plugin","tsify","transform","bundle","contents","toString","compilesGlobs_","ext","replace","target","compile","RegExp","test","compileWatcher_","compileScss","logWatch","js","compileJs","ts","compileTs","stats","bundleCss_","bundles_","bundleCssItem_","bundleJs_","bundleJsItem_","bundleResource_","resources_","bundleResourceItem_","dirname","resource","bundleWatcher_","css","env","PWD","resolve","cwd","chdir","err","path_","yargs","getConfig","defaultTarget","browser","dist","server","host","port","gulpfileConfigText","readFileSync","gulpfileConfig","JSON","parse","stripBom","text","charCodeAt","slice","configWatcher_","configWatch","series","require$$1","require$$2","require$$3","compileTask","bundleCss","bundleJs","bundleResource","bundleTask","watchers","watchTask","w","shift","close","compileWatcher","bundleWatcher","configWatcher","serveTask","root","https","fallback","livereload"],"mappings":"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"}